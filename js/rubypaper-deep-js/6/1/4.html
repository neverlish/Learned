<!-- 6 브라우저 환경에서의 자바스크립트 - 1 단일 스레드 환경 -->
<!-- 두 개의 setTimeout()을 같은 시간으로 설정한 예 -->

<html>
  <button id="addItem">
    Add New Input
  </button>
  <div id="items">
  </div>
  <script>
  (function() {
    var divItems = document.getElementById('items'),
        buttonAddItem = document.getElementById('addItem'),
        inputItem = document.createElement('input'),
        divLog = document.getElementById('log');
    
    buttonAddItem.onclick = function() {
      var inputCloneItem = inputItem.cloneNode(true),
          waitSeconds = 10;

      inputCloneItem.value = 'Give me focus';
      divItems.appendChild(inputCloneItem);

      console.log('Onclick function invoked at: \t' + Date.now());

      setTimeout(function() {
        console.log('1st function invoked  at: \t\t' + Date.now());
        sleep(waitSeconds * 1000);
      }, 2000);

      setTimeout(function() {        
        inputCloneItem.focus();
        console.log('2nd function invoked  at: \t\t' + Date.now());
      }, 2000);

      sleep(waitSeconds * 1000);
    }

    function sleep(waitMilliseconds) {
      var waitUntil = Date.now() + waitMilliseconds;
      while (Date.now() < waitUntil) {
        ;
      }
    }
  }());
  </script>
</html>

